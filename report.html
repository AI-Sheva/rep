<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Report for models &mdash; REP (Reproducible Experiment Platform) 0.6.1 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.6.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="REP (Reproducible Experiment Platform) 0.6.1 documentation" href="index.html" />
    <link rel="next" title="Plotting" href="plotting.html" />
    <link rel="prev" title="Meta Machine Learning" href="metaml.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="plotting.html" title="Plotting"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="metaml.html" title="Meta Machine Learning"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">REP (Reproducible Experiment Platform) 0.6.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="report-for-models">
<span id="report"></span><h1>Report for models<a class="headerlink" href="#report-for-models" title="Permalink to this headline">¶</a></h1>
<p>This module contains helpful classes to get a report for estimators, such as feature distribution,
prediction distribution, ROC curves, learning curves, and others, and compare them.</p>
<div class="section" id="module-rep.report.classification">
<span id="classification-report"></span><h2>Classification Report<a class="headerlink" href="#module-rep.report.classification" title="Permalink to this headline">¶</a></h2>
<p>This module contains report class for classification estimators. Report includes:</p>
<blockquote>
<div><ul class="simple">
<li>features scatter plots, distributions, correlations</li>
<li>learning curve</li>
<li>roc curve</li>
<li>efficiencies</li>
<li>metric vs cut</li>
<li>feature importance</li>
<li>feature importance by shuffling the feature column</li>
</ul>
</div></blockquote>
<p>All methods return objects, which have <cite>plot</cite> method (details see in <a class="reference internal" href="plotting.html#module-rep.plotting" title="rep.plotting"><code class="xref py py-class docutils literal"><span class="pre">rep.plotting</span></code></a>),
these objects contain raw information about things to be plotted.</p>
<dl class="class">
<dt id="rep.report.classification.ClassificationReport">
<em class="property">class </em><code class="descclassname">rep.report.classification.</code><code class="descname">ClassificationReport</code><span class="sig-paren">(</span><em>classifiers</em>, <em>lds</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.classification.ClassificationReport" title="Permalink to this definition">¶</a></dt>
<dd><p>Test estimators on any data. Supports ROC curve, prediction distribution, features information
(correlation matrix, distribution, scatter plots for pairs of features),
efficiencies for thresholds (evaluate flatness of predictions for important feature),
correlation with prediction for necessary feature, any metrics of quality.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>classifiers</strong> (<em>dict[str, Classifier]</em>) &#8211; estimators</li>
<li><strong>lds</strong> (<a class="reference internal" href="data.html#rep.data.storage.LabeledDataStorage" title="rep.data.storage.LabeledDataStorage"><em>LabeledDataStorage</em></a>) &#8211; data</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="rep.report.classification.ClassificationReport.compute_metric">
<code class="descname">compute_metric</code><span class="sig-paren">(</span><em>metric</em>, <em>mask=None</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.classification.ClassificationReport.compute_metric" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute metric value</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>metric</strong> &#8211; <p>function like object with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y_true</span><span class="p">,</span> <span class="n">prob</span><span class="p">,</span> <span class="n">sample_weight</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><strong>mask</strong> (<em>None or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask, points we should use</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">metric value for each estimator</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.efficiencies">
<code class="descname">efficiencies</code><span class="sig-paren">(</span><em>features</em>, <em>thresholds=None</em>, <em>mask=None</em>, <em>bins=30</em>, <em>labels_dict=None</em>, <em>ignored_sideband=0.0</em>, <em>errors=False</em>, <em>grid_columns=2</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.classification.ClassificationReport.efficiencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Efficiencies for spectators</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>features</strong> (<em>None or list[str]</em>) &#8211; using features (if None then use classifier&#8217;s spectators)</li>
<li><strong>bins</strong> (<em>int or array-like</em>) &#8211; bins for histogram</li>
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>thresholds</strong> (<em>list[float]</em>) &#8211; thresholds on prediction</li>
<li><strong>errors</strong> (<em>bool</em>) &#8211; if True then use errorbar, else interpolate function</li>
<li><strong>labels_dict</strong> (<em>None or OrderedDict(int: str)</em>) &#8211; label &#8211; name for class label
if None then {0: &#8216;bck&#8217;, &#8216;1&#8217;: &#8216;signal&#8217;}</li>
<li><strong>grid_columns</strong> (<em>int</em>) &#8211; count of columns in grid</li>
<li><strong>ignored_sideband</strong> (<em>float</em>) &#8211; (0, 1) percent of plotting data</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.efficiencies_2d">
<code class="descname">efficiencies_2d</code><span class="sig-paren">(</span><em>features</em>, <em>efficiency</em>, <em>mask=None</em>, <em>n_bins=20</em>, <em>ignored_sideband=0.0</em>, <em>labels_dict=None</em>, <em>grid_columns=2</em>, <em>signal_label=1</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.classification.ClassificationReport.efficiencies_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>For binary classification plots the dependence of efficiency on two columns</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>features</strong> &#8211; tuple of list with names of two features</li>
<li><strong>efficiency</strong> (<em>float</em>) &#8211; efficiency, float</li>
<li><strong>n_bins</strong> (<em>int or array-like</em>) &#8211; bins for histogram</li>
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>labels_dict</strong> (<em>None or OrderedDict(int: str)</em>) &#8211; label &#8211; name for class label
if None then {0: &#8216;bck&#8217;, &#8216;1&#8217;: &#8216;signal&#8217;}</li>
<li><strong>grid_columns</strong> (<em>int</em>) &#8211; count of columns in grid</li>
<li><strong>ignored_sideband</strong> (<em>float</em>) &#8211; (0, 1) percent of plotting data</li>
<li><strong>signal_label</strong> (<em>int</em>) &#8211; label to calculate efficiency threshold</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.feature_importance">
<code class="descname">feature_importance</code><span class="sig-paren">(</span><em>grid_columns=2</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.classification.ClassificationReport.feature_importance" title="Permalink to this definition">¶</a></dt>
<dd><p>Get features importance</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>grid_columns</strong> (<em>int</em>) &#8211; count of columns in grid</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.feature_importance_shuffling">
<code class="descname">feature_importance_shuffling</code><span class="sig-paren">(</span><em>metric=LogLoss(regularization=1e-15)</em>, <em>mask=None</em>, <em>grid_columns=2</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.classification.ClassificationReport.feature_importance_shuffling" title="Permalink to this definition">¶</a></dt>
<dd><p>Get features importance using shuffling method (apply random permutation to one particular column)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>metric</strong> &#8211; function to measure quality
function(y_true, proba, sample_weight=None)</li>
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask which points the data we should train on</li>
<li><strong>grid_columns</strong> (<em>int</em>) &#8211; number of columns in grid</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.features_correlation_matrix">
<code class="descname">features_correlation_matrix</code><span class="sig-paren">(</span><em>features=None</em>, <em>mask=None</em>, <em>tick_labels=None</em>, <em>vmin=-1</em>, <em>vmax=1</em>, <em>cmap='Reds'</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.classification.ClassificationReport.features_correlation_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Correlation between features</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>features</strong> (<em>None or list[str]</em>) &#8211; using features (if None then use estimator&#8217;s features)</li>
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>tick_labels</strong> (<em>None or array-like</em>) &#8211; names for features in matrix</li>
<li><strong>vmin</strong> (<em>int</em>) &#8211; min of value for min color</li>
<li><strong>vmax</strong> (<em>int</em>) &#8211; max of value for max color</li>
<li><strong>cmap</strong> (<em>str</em>) &#8211; color map name</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.ColorMap" title="rep.plotting.ColorMap">plotting.ColorMap</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.features_correlation_matrix_by_class">
<code class="descname">features_correlation_matrix_by_class</code><span class="sig-paren">(</span><em>features=None</em>, <em>mask=None</em>, <em>tick_labels=None</em>, <em>vmin=-1</em>, <em>vmax=1</em>, <em>labels_dict=None</em>, <em>grid_columns=2</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.classification.ClassificationReport.features_correlation_matrix_by_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Correlation between features (built separately for each class)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>features</strong> (<em>None or list[str]</em>) &#8211; using features (if None then use classifier&#8217;s features)</li>
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>labels_dict</strong> (<em>None or OrderedDict(int: str)</em>) &#8211; label &#8211; name for class label
if None then {0: &#8216;bck&#8217;, &#8216;1&#8217;: &#8216;signal&#8217;}</li>
<li><strong>tick_labels</strong> (<em>None or array-like</em>) &#8211; names for features in matrix</li>
<li><strong>vmin</strong> (<em>int</em>) &#8211; min of value for min color</li>
<li><strong>vmax</strong> (<em>int</em>) &#8211; max of value for max color</li>
<li><strong>grid_columns</strong> (<em>int</em>) &#8211; count of columns in grid</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.features_pdf">
<code class="descname">features_pdf</code><span class="sig-paren">(</span><em>features=None</em>, <em>mask=None</em>, <em>bins=30</em>, <em>ignored_sideband=0.0</em>, <em>labels_dict=None</em>, <em>grid_columns=2</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.classification.ClassificationReport.features_pdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Features distribution (with errors)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>features</strong> (<em>None or list[str]</em>) &#8211; using features (if None then use classifier&#8217;s features)</li>
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>bins</strong> (<em>int or array-like</em>) &#8211; count of bins or array with boarders</li>
<li><strong>labels_dict</strong> (<em>None or OrderedDict(int: str)</em>) &#8211; label &#8211; name for class label
if None then {0: &#8216;bck&#8217;, &#8216;1&#8217;: &#8216;signal&#8217;}</li>
<li><strong>grid_columns</strong> (<em>int</em>) &#8211; count of columns in grid</li>
<li><strong>ignored_sideband</strong> (<em>float</em>) &#8211; float from (0, 1), part of events ignored from the left and from the right</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.learning_curve">
<code class="descname">learning_curve</code><span class="sig-paren">(</span><em>metric</em>, <em>mask=None</em>, <em>steps=10</em>, <em>metric_label='metric'</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.classification.ClassificationReport.learning_curve" title="Permalink to this definition">¶</a></dt>
<dd><p>Get learning curves</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>metric</strong> (<em>function</em>) &#8211; function looks like function
def function(y_true, y_pred, sample_weight=None)</li>
<li><strong>steps</strong> (<em>int or dict</em>) &#8211; if int, the same step is used in all learning curves,
otherwise dict with steps for each estimator</li>
<li><strong>metric_label</strong> (<em>str</em>) &#8211; name for metric on plot</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.FunctionsPlot" title="rep.plotting.FunctionsPlot">plotting.FunctionsPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.metrics_vs_cut">
<code class="descname">metrics_vs_cut</code><span class="sig-paren">(</span><em>metric</em>, <em>mask=None</em>, <em>metric_label='metric'</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.classification.ClassificationReport.metrics_vs_cut" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw values of binary metric depending on the threshold on predictions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>metric</strong> &#8211; binary metric (AMS, f1 or so - shall use only tpr and fpr)</li>
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data used in comparison</li>
<li><strong>metric_label</strong> (<em>str</em>) &#8211; name for metric on plot</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.FunctionsPlot" title="rep.plotting.FunctionsPlot">plotting.FunctionsPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.prediction_pdf">
<code class="descname">prediction_pdf</code><span class="sig-paren">(</span><em>mask=None</em>, <em>target_class=1</em>, <em>bins=30</em>, <em>size=2</em>, <em>log=False</em>, <em>plot_type='error_bar'</em>, <em>normed=True</em>, <em>labels_dict=None</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.classification.ClassificationReport.prediction_pdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Distribution of prediction for signal and bck separately with errors</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>target_class</strong> (<em>int or None</em>) &#8211; draw probabilities of being classified as target_class
(default 1, will draw signal probabilities).
If None, will draw probability corresponding to right class of each event.</li>
<li><strong>bins</strong> (<em>int or array-like</em>) &#8211; number of bins in histogram</li>
<li><strong>size</strong> (<em>int</em>) &#8211; points size on plots</li>
<li><strong>log</strong> (<em>bool</em>) &#8211; use logarithmic scale</li>
<li><strong>normed</strong> (<em>bool</em>) &#8211; draw normed pdf or not (normed by default)</li>
<li><strong>plot_type</strong> (<em>str</em>) &#8211; &#8216;error_bar&#8217; for error type and &#8216;bar&#8217; for hist type</li>
<li><strong>labels_dict</strong> (<em>None or OrderedDict(int: str)</em>) &#8211; names for class labels as dictionary
if None then {0: &#8216;bck&#8217;, &#8216;1&#8217;: &#8216;signal&#8217;}</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">plotting.ErrorPlot or plotting.BarPlot</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.roc">
<code class="descname">roc</code><span class="sig-paren">(</span><em>mask=None</em>, <em>signal_label=1</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.classification.ClassificationReport.roc" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate roc functions for data and return roc plot object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>grid_columns</strong> (<em>int</em>) &#8211; count of columns for multi-rocs</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.FunctionsPlot" title="rep.plotting.FunctionsPlot">plotting.FunctionsPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.scatter">
<code class="descname">scatter</code><span class="sig-paren">(</span><em>correlation_pairs</em>, <em>mask=None</em>, <em>marker_size=20</em>, <em>alpha=0.1</em>, <em>labels_dict=None</em>, <em>grid_columns=2</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.classification.ClassificationReport.scatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Correlation between pairs of features</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>correlation_pairs</strong> (<em>list[tuple]</em>) &#8211; pairs of features along which scatter plot will be build.</li>
<li><strong>mask</strong> (<em>None or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>marker_size</strong> (<em>int</em>) &#8211; size of marker for each event on the plot</li>
<li><strong>alpha</strong> (<em>float</em>) &#8211; blending parameter for scatter</li>
<li><strong>labels_dict</strong> (<em>None or OrderedDict(int: str)</em>) &#8211; label &#8211; name for class label
if None then {0: &#8216;bck&#8217;, &#8216;1&#8217;: &#8216;signal&#8217;}</li>
<li><strong>grid_columns</strong> (<em>int</em>) &#8211; count of columns in grid</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-rep.report.regression">
<span id="regression-report"></span><h2>Regression Report<a class="headerlink" href="#module-rep.report.regression" title="Permalink to this headline">¶</a></h2>
<p>This file contains report class for regression estimators. Report includes:</p>
<blockquote>
<div><ul class="simple">
<li>features scatter plots, correlations</li>
<li>learning curve</li>
<li>feature importance</li>
<li>feature importance by shuffling the feature column</li>
</ul>
</div></blockquote>
<p>All methods return objects, which can have plot method (details see in <a class="reference internal" href="plotting.html#module-rep.plotting" title="rep.plotting"><code class="xref py py-class docutils literal"><span class="pre">rep.plotting</span></code></a>)</p>
<dl class="class">
<dt id="rep.report.regression.RegressionReport">
<em class="property">class </em><code class="descclassname">rep.report.regression.</code><code class="descname">RegressionReport</code><span class="sig-paren">(</span><em>regressors</em>, <em>lds</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.regression.RegressionReport" title="Permalink to this definition">¶</a></dt>
<dd><p>Report simplifies comparison of regressors on the same dataset.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>regressors</strong> (<em>dict[str, Regressor]</em>) &#8211; OrderedDict with regressors (RegressionFactory)</li>
<li><strong>lds</strong> (<a class="reference internal" href="data.html#rep.data.storage.LabeledDataStorage" title="rep.data.storage.LabeledDataStorage"><em>LabeledDataStorage</em></a>) &#8211; data</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="rep.report.regression.RegressionReport.compute_metric">
<code class="descname">compute_metric</code><span class="sig-paren">(</span><em>metric</em>, <em>mask=None</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.regression.RegressionReport.compute_metric" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute metric value</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>metric</strong> &#8211; <p>function like object with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y_true</span><span class="p">,</span> <span class="n">prob</span><span class="p">,</span> <span class="n">sample_weight</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><strong>mask</strong> (<em>None or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask, points we should use</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">metric value for each estimator</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.regression.RegressionReport.feature_importance">
<code class="descname">feature_importance</code><span class="sig-paren">(</span><em>grid_columns=2</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.regression.RegressionReport.feature_importance" title="Permalink to this definition">¶</a></dt>
<dd><p>Get features importance</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>grid_columns</strong> (<em>int</em>) &#8211; count of columns in grid</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.regression.RegressionReport.feature_importance_shuffling">
<code class="descname">feature_importance_shuffling</code><span class="sig-paren">(</span><em>metric=&lt;function mean_squared_error&gt;</em>, <em>mask=None</em>, <em>grid_columns=2</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.regression.RegressionReport.feature_importance_shuffling" title="Permalink to this definition">¶</a></dt>
<dd><p>Get features importance using shuffling method (apply random permutation to one particular column)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>metric</strong> &#8211; function to measure quality
function(y_true, y_predicted, sample_weight=None)</li>
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask which points we should compare on</li>
<li><strong>grid_columns</strong> (<em>int</em>) &#8211; number of columns in grid</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.regression.RegressionReport.features_correlation_matrix">
<code class="descname">features_correlation_matrix</code><span class="sig-paren">(</span><em>features=None</em>, <em>mask=None</em>, <em>tick_labels=None</em>, <em>vmin=-1</em>, <em>vmax=1</em>, <em>cmap='Reds'</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.regression.RegressionReport.features_correlation_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Correlation between features</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>features</strong> (<em>None or list[str]</em>) &#8211; using features (if None then use estimator&#8217;s features)</li>
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>tick_labels</strong> (<em>None or array-like</em>) &#8211; names for features in matrix</li>
<li><strong>vmin</strong> (<em>int</em>) &#8211; min of value for min color</li>
<li><strong>vmax</strong> (<em>int</em>) &#8211; max of value for max color</li>
<li><strong>cmap</strong> (<em>str</em>) &#8211; color map name</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.ColorMap" title="rep.plotting.ColorMap">plotting.ColorMap</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.regression.RegressionReport.learning_curve">
<code class="descname">learning_curve</code><span class="sig-paren">(</span><em>metric</em>, <em>mask=None</em>, <em>steps=10</em>, <em>metric_label='metric'</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.regression.RegressionReport.learning_curve" title="Permalink to this definition">¶</a></dt>
<dd><p>Get learning curves</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>metric</strong> (<em>function</em>) &#8211; function looks like function
def function(y_true, y_pred, sample_weight=None)</li>
<li><strong>steps</strong> (<em>int or dict</em>) &#8211; if int, the same step is used in all learning curves,
otherwise dict with steps for each estimator</li>
<li><strong>metric_label</strong> (<em>str</em>) &#8211; name for metric on plot</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.FunctionsPlot" title="rep.plotting.FunctionsPlot">plotting.FunctionsPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.regression.RegressionReport.predictions_scatter">
<code class="descname">predictions_scatter</code><span class="sig-paren">(</span><em>features=None</em>, <em>mask=None</em>, <em>marker_size=20</em>, <em>alpha=0.1</em>, <em>grid_columns=2</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.regression.RegressionReport.predictions_scatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Correlation between predictions and features</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>features</strong> (<em>None or list[str]</em>) &#8211; using features (if None then use classifier&#8217;s features)</li>
<li><strong>mask</strong> (<em>None or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>marker_size</strong> (<em>int</em>) &#8211; size of marker for each event on the plot</li>
<li><strong>alpha</strong> (<em>float</em>) &#8211; blending parameter for scatter</li>
<li><strong>grid_columns</strong> (<em>int</em>) &#8211; count of columns in grid</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.regression.RegressionReport.scatter">
<code class="descname">scatter</code><span class="sig-paren">(</span><em>correlation_pairs</em>, <em>mask=None</em>, <em>marker_size=20</em>, <em>alpha=0.1</em>, <em>grid_columns=2</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.regression.RegressionReport.scatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Correlation between pairs of features</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>correlation_pairs</strong> (<em>list[tuple]</em>) &#8211; pairs of features along which scatter plot will be build.</li>
<li><strong>mask</strong> (<em>None or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>marker_size</strong> (<em>int</em>) &#8211; size of marker for each event on the plot</li>
<li><strong>alpha</strong> (<em>float</em>) &#8211; blending parameter for scatter</li>
<li><strong>grid_columns</strong> (<em>int</em>) &#8211; count of columns in grid</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-rep.report.metrics">
<span id="metrics"></span><h2>Metrics<a class="headerlink" href="#module-rep.report.metrics" title="Permalink to this headline">¶</a></h2>
<p>This file contains definitions for useful metrics in specific REP format.
In general case, metrics follows standard sklearn convention for <strong>estimators</strong>, provides</p>
<blockquote>
<div><ul class="simple">
<li>constructor (you should create instance of metric!):</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">metric</span> <span class="o">=</span> <span class="n">RocAuc</span><span class="p">(</span><span class="n">parameter</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>fitting, where checks and heavy computations performed
(this step is needed for ranking metrics, uniformity metrics):</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">metric</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">sample_weight</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>computation of metrics by probabilities:</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">proba</span> <span class="o">=</span> <span class="n">classifier</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">metrics</span><span class="p">(</span><span class="n">proba</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>This way metrics can be used in learning curves, for instance. Once fitted, then for every stage
computation will be very fast.</p>
<div class="section" id="correspondence-between-physical-terms-and-ml-terms">
<h3>Correspondence between physical terms and ML terms<a class="headerlink" href="#correspondence-between-physical-terms-and-ml-terms" title="Permalink to this headline">¶</a></h3>
<p>Some notation used below:</p>
<blockquote>
<div><ul class="simple">
<li>IsSignal (IsS) &#8212; is really signal</li>
<li>AsSignal (AsS) &#8212; classified as signal</li>
<li>IsBackgroundAsSignal - background, but classified as signal</li>
</ul>
</div></blockquote>
<p>... and so on. Cute, right?</p>
<p>There are many ways to denote this things:</p>
<blockquote>
<div><ul class="simple">
<li>tpr = s = isSasS / isS</li>
<li>fpr = b = isBasS / isB</li>
</ul>
</div></blockquote>
<p>Here we used normalized s and b, while physicists usually normalize
them to particular values of expected amount of s and b.</p>
<blockquote>
<div><ul class="simple">
<li>signal efficiency = tpr = s</li>
</ul>
<p>the following line used only in HEP</p>
<ul class="simple">
<li>background efficiency = fpr = b</li>
</ul>
</div></blockquote>
<dl class="class">
<dt id="rep.report.metrics.FPRatTPR">
<em class="property">class </em><code class="descclassname">rep.report.metrics.</code><code class="descname">FPRatTPR</code><span class="sig-paren">(</span><em>tpr</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.metrics.FPRatTPR" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">sklearn.base.BaseEstimator</span></code>, <a class="reference internal" href="#rep.report.metrics.MetricMixin" title="rep.report.metrics.MetricMixin"><code class="xref py py-class docutils literal"><span class="pre">rep.report.metrics.MetricMixin</span></code></a></p>
<p>Fix TPR value on roc curve and return FPR value.</p>
</dd></dl>

<dl class="class">
<dt id="rep.report.metrics.LogLoss">
<em class="property">class </em><code class="descclassname">rep.report.metrics.</code><code class="descname">LogLoss</code><span class="sig-paren">(</span><em>regularization=1e-15</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.metrics.LogLoss" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">sklearn.base.BaseEstimator</span></code>, <a class="reference internal" href="#rep.report.metrics.MetricMixin" title="rep.report.metrics.MetricMixin"><code class="xref py py-class docutils literal"><span class="pre">rep.report.metrics.MetricMixin</span></code></a></p>
<p>Log loss,
which is the same as minus log-likelihood,
and the same as logistic loss,
and the same as cross-entropy loss.</p>
<dl class="method">
<dt id="rep.report.metrics.LogLoss.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>X</em>, <em>y</em>, <em>sample_weight=None</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.metrics.LogLoss.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare metrics for usage, preprocessing is done in this function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>X</strong> (<em>pandas.DataFrame</em>) &#8211; data shape [n_samples, n_features]</li>
<li><strong>y</strong> &#8211; labels of events - array-like of shape [n_samples]</li>
<li><strong>sample_weight</strong> &#8211; weight of events,
array-like of shape [n_samples] or None if all weights are equal</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">self</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="rep.report.metrics.MetricMixin">
<em class="property">class </em><code class="descclassname">rep.report.metrics.</code><code class="descname">MetricMixin</code><a class="headerlink" href="#rep.report.metrics.MetricMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class with helpful methods for metrics,
metrics are expected (but not obliged) to be derived from it.</p>
<dl class="method">
<dt id="rep.report.metrics.MetricMixin.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>X</em>, <em>y</em>, <em>sample_weight=None</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.metrics.MetricMixin.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare metrics for usage, preprocessing is done in this function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>X</strong> (<em>pandas.DataFrame</em>) &#8211; data shape [n_samples, n_features]</li>
<li><strong>y</strong> &#8211; labels of events - array-like of shape [n_samples]</li>
<li><strong>sample_weight</strong> &#8211; weight of events,
array-like of shape [n_samples] or None if all weights are equal</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">self</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="rep.report.metrics.OptimalAMS">
<em class="property">class </em><code class="descclassname">rep.report.metrics.</code><code class="descname">OptimalAMS</code><span class="sig-paren">(</span><em>expected_s=691.988607712</em>, <em>expected_b=410999.847</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.metrics.OptimalAMS" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#rep.report.metrics.OptimalMetric" title="rep.report.metrics.OptimalMetric"><code class="xref py py-class docutils literal"><span class="pre">rep.report.metrics.OptimalMetric</span></code></a></p>
<p>Optimal values of AMS (average median significance)</p>
<p>default values of expected_s and expected_b are from HiggsML challenge.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>expected_s</strong> (<em>float</em>) &#8211; expected amount of signal</li>
<li><strong>expected_b</strong> (<em>float</em>) &#8211; expected amount of background</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="rep.report.metrics.OptimalMetric">
<em class="property">class </em><code class="descclassname">rep.report.metrics.</code><code class="descname">OptimalMetric</code><span class="sig-paren">(</span><em>metric</em>, <em>expected_s=1.0</em>, <em>expected_b=1.0</em>, <em>signal_label=1</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.metrics.OptimalMetric" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">sklearn.base.BaseEstimator</span></code>, <a class="reference internal" href="#rep.report.metrics.MetricMixin" title="rep.report.metrics.MetricMixin"><code class="xref py py-class docutils literal"><span class="pre">rep.report.metrics.MetricMixin</span></code></a></p>
<p>Class to calculate optimal threshold on predictions using some metric</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>metric</strong> (<em>function</em>) &#8211; metrics(s, b) -&gt; float</li>
<li><strong>expected_s</strong> &#8211; float, total weight of signal</li>
<li><strong>expected_b</strong> &#8211; float, total weight of background</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="rep.report.metrics.OptimalMetric.compute">
<code class="descname">compute</code><span class="sig-paren">(</span><em>y_true</em>, <em>proba</em>, <em>sample_weight=None</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.metrics.OptimalMetric.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute metric for each possible prediction threshold</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>y_true</strong> &#8211; array-like true labels</li>
<li><strong>proba</strong> &#8211; array-like of shape [n_samples, 2] with predicted probabilities</li>
<li><strong>sample_weight</strong> &#8211; array-like weight</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">tuple(array, array)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">thresholds and corresponding metric values</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.metrics.OptimalMetric.plot_vs_cut">
<code class="descname">plot_vs_cut</code><span class="sig-paren">(</span><em>y_true</em>, <em>proba</em>, <em>sample_weight=None</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.metrics.OptimalMetric.plot_vs_cut" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute metric for each possible prediction threshold</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>y_true</strong> &#8211; array-like true labels</li>
<li><strong>proba</strong> &#8211; array-like of shape [n_samples, 2] with predicted probabilities</li>
<li><strong>sample_weight</strong> &#8211; array-like weight</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.FunctionsPlot" title="rep.plotting.FunctionsPlot">plotting.FunctionsPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="rep.report.metrics.OptimalSignificance">
<em class="property">class </em><code class="descclassname">rep.report.metrics.</code><code class="descname">OptimalSignificance</code><span class="sig-paren">(</span><em>expected_s=1.0</em>, <em>expected_b=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.metrics.OptimalSignificance" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#rep.report.metrics.OptimalMetric" title="rep.report.metrics.OptimalMetric"><code class="xref py py-class docutils literal"><span class="pre">rep.report.metrics.OptimalMetric</span></code></a></p>
<dl class="docutils">
<dt>Optimal values of significance:</dt>
<dd>s / sqrt(b)</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>expected_s</strong> (<em>float</em>) &#8211; expected amount of signal</li>
<li><strong>expected_b</strong> (<em>float</em>) &#8211; expected amount of background</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="rep.report.metrics.RocAuc">
<em class="property">class </em><code class="descclassname">rep.report.metrics.</code><code class="descname">RocAuc</code><span class="sig-paren">(</span><em>positive_label=1</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.metrics.RocAuc" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">sklearn.base.BaseEstimator</span></code>, <a class="reference internal" href="#rep.report.metrics.MetricMixin" title="rep.report.metrics.MetricMixin"><code class="xref py py-class docutils literal"><span class="pre">rep.report.metrics.MetricMixin</span></code></a></p>
<p>Computes area under the ROC curve.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>positive_label</strong> (<em>int</em>) &#8211; label of class, in case of more then two classes,
will compute ROC AUC for this specific class vs others</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="rep.report.metrics.RocAuc.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>X</em>, <em>y</em>, <em>sample_weight=None</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.metrics.RocAuc.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare metrics for usage, preprocessing is done in this function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>X</strong> (<em>pandas.DataFrame</em>) &#8211; data shape [n_samples, n_features]</li>
<li><strong>y</strong> &#8211; labels of events - array-like of shape [n_samples]</li>
<li><strong>sample_weight</strong> &#8211; weight of events,
array-like of shape [n_samples] or None if all weights are equal</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">self</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="rep.report.metrics.TPRatFPR">
<em class="property">class </em><code class="descclassname">rep.report.metrics.</code><code class="descname">TPRatFPR</code><span class="sig-paren">(</span><em>fpr</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.metrics.TPRatFPR" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">sklearn.base.BaseEstimator</span></code>, <a class="reference internal" href="#rep.report.metrics.MetricMixin" title="rep.report.metrics.MetricMixin"><code class="xref py py-class docutils literal"><span class="pre">rep.report.metrics.MetricMixin</span></code></a></p>
<p>Fix FPR value on roc curve and return TPR value.</p>
</dd></dl>

<dl class="function">
<dt id="rep.report.metrics.ams">
<code class="descclassname">rep.report.metrics.</code><code class="descname">ams</code><span class="sig-paren">(</span><em>s</em>, <em>b</em>, <em>br=10.0</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.metrics.ams" title="Permalink to this definition">¶</a></dt>
<dd><p>Regularized approximate median significance</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>s</strong> &#8211; amount of signal passed</li>
<li><strong>b</strong> &#8211; amount of background passed</li>
<li><strong>br</strong> &#8211; regularization</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="rep.report.metrics.significance">
<code class="descclassname">rep.report.metrics.</code><code class="descname">significance</code><span class="sig-paren">(</span><em>s</em>, <em>b</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.metrics.significance" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Approximate significance of discovery:</dt>
<dd>s / sqrt(b).</dd>
</dl>
<p>Here we use normalization, so maximal s and b are equal to 1.</p>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Report for models</a><ul>
<li><a class="reference internal" href="#module-rep.report.classification">Classification Report</a></li>
<li><a class="reference internal" href="#module-rep.report.regression">Regression Report</a></li>
<li><a class="reference internal" href="#module-rep.report.metrics">Metrics</a><ul>
<li><a class="reference internal" href="#correspondence-between-physical-terms-and-ml-terms">Correspondence between physical terms and ML terms</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="metaml.html"
                        title="previous chapter">Meta Machine Learning</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="plotting.html"
                        title="next chapter">Plotting</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/report.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="plotting.html" title="Plotting"
             >next</a> |</li>
        <li class="right" >
          <a href="metaml.html" title="Meta Machine Learning"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">REP (Reproducible Experiment Platform) 0.6.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2014, Yandex.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>